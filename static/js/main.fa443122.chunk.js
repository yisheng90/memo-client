(this["webpackJsonpmemo-client"]=this["webpackJsonpmemo-client"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(32)},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),i=n(2),u=n(3),l=n(4),s=n(6),d=n(5),f=n.n(d),b=n(7),m="https://agile-eyrie-72271.herokuapp.com",p={Accept:"application/json","Content-Type":"application/json"},v=n(8);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var O=["Date","Title"],g=function(e,t){return new Date(e.created_date).getTime()-new Date(t.created_date).getTime()},j=function(e,t){var n=e.title&&e.title.toLowerCase(),a=t.title&&t.title.toLowerCase();return n>a?1:n<a?-1:0},y=function(e){var t=Object(a.useState)({field:O[0],sortable:!0}),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useCallback)((function(e){return c((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},e)}))}),[]),u=e;return r.sortable&&(u="Title"===r.field?e.sort(j):e.sort(g)),{sortedIdeas:u,sortField:r.field,disableSorting:function(){return o({sortable:!1})},enableSorting:function(){return o({sortable:!0})},updateSortingField:function(e){return o({field:e})}}},_=(n(24),function(e){var t=e.message,n=e.onCancel;return r.a.createElement("div",{className:"notification__card","data-testid":"notification__card"},t,r.a.createElement("span",{className:"notification__card--close",onClick:n,"data-testid":"notification__card--close"},r.a.createElement(u.a,{icon:l.b,size:"xs"})))}),E=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=function(){return c((function(e){return e.pop(),Object(s.a)(e)}))};return Object(a.useEffect)((function(){if(n.length>0){var e=setInterval(o,3e3);return function(){return clearInterval(e)}}}),[n]),{notify:function(e){return c((function(t){return t.find((function(t){return t===e}))?t:[e].concat(Object(s.a)(t))}))},Notification:function(){return r.a.createElement("div",{className:"notification__container"},n.map((function(e,t){return r.a.createElement(_,{message:e,onCancel:function(){return e=t,c((function(t){return t=t.filter((function(t,n){return n!==e})),Object(s.a)(t)}));var e}})})))}}},w=(n(25),n(1)),k=(n(26),n(27),function(e){var t=e.value,n=e.onBlur,c=e.onFocus,o=e.onChange,u=Object(a.useState)(!1),l=Object(i.a)(u,2),s=l[0],d=l[1],f=Object(a.useCallback)((function(){return t&&d(140-t.length<15)}),[t]),b=Object(a.useCallback)((function(e){e.target.value.length<=140&&o(e.target.value),f()}),[o,f]),m=Object(a.useCallback)((function(e){d(!1),n(e.target.value)}),[n]),p=Object(a.useCallback)((function(){f(),c()}),[c,f]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{"data-testid":"textarea",value:t||"",onFocus:p,onChange:b,onBlur:m}),s&&r.a.createElement("span",{className:"textarea__word_counter","data-testid":"word_count"},t.length,"/",140))});k.propType={value:w.string,onBlur:w.func.isRequired,onFocus:w.func.isRequired,onChange:w.func.isRequired};n(28);var C=function(e){var t=e.value,n=e.onBlur,c=e.onFocus,o=e.onChange,i=e.placeholder,u=Object(a.useRef)(null),l=Object(a.useCallback)((function(e){return o&&o(e.target.value)}),[o]);return Object(a.useEffect)((function(){!t&&u.current&&u.current.focus()}),[t]),r.a.createElement("input",{"data-testid":"input",ref:u,value:t,onFocus:c,onChange:l,onBlur:function(){return n(t)},placeholder:i})};C.defaultProps={value:"",placeholder:"Please start typing"};n(29);var S=function(e){var t=e.isVisible,n=e.onCancel,a=e.children;return t?r.a.createElement("div",{className:"modal__mask",onClick:n},r.a.createElement("div",{className:"modal__container","data-testid":"modal__container"},r.a.createElement("div",{className:"modal__container--inner"},a,r.a.createElement("span",{className:"modal__action--close",onClick:n,"data-testid":"modal__action--close"},r.a.createElement(u.a,{icon:l.b,size:"xs"}))))):null},N=(n(30),function(e){var t=e.type,n=e.block,a=e.disabled,c=e.onClick,o=e.children,i=["button__primary"];return"danger"===t&&(i=["button__danger"]),n&&i.push("block"),r.a.createElement("button",{"data-testid":"button",className:i.join(" "),disabled:a,onClick:function(){return c&&c()}},o)});function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}N.defaultProps={type:"primary"};var P=function(e){var t=e.idea,n=e.onDelete,c=e.onUpdate,o=e.enableSort,s=e.disableSort,d=Object(a.useState)(!1),f=Object(i.a)(d,2),b=f[0],m=f[1],p=Object(a.useState)(t),h=Object(i.a)(p,2),O=h[0],g=h[1],j=Object(a.useState)(!1),y=Object(i.a)(j,2),_=y[0],E=y[1],w=new Date(t.created_date).toLocaleString(),P=Object(a.useCallback)((function(e){return g((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},e)}))}),[]),D=function(){t.title===O.title&&t.body===O.body||c(O),o&&o()},I=function(e){!0===e&&n(O.id),E(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:t.id,"data-testid":"card__container",className:"card__container",onPointerMove:function(){return m(!0)},onPointerLeave:function(){return m(!1)}},r.a.createElement(C,{value:O.title,onFocus:s,onBlur:D,placeholder:"Untitled",onChange:function(e){return P({title:e})}}),r.a.createElement("span",{className:"card__details--date","data-testid":"card__details--date"},w),r.a.createElement(k,{value:O.body,onBlur:function(){O.title||O.body?D():E(!0)},onFocus:s,onChange:function(e){return P({body:e})}}),b&&r.a.createElement(u.a,{icon:l.c,size:"xs",className:"card__action--delete","data-testid":"card__action--delete",onClick:function(){return n(t.id)}})),r.a.createElement(S,{isVisible:_,onCancel:function(){return I(!1)}},r.a.createElement("div",{className:"modal__body"},r.a.createElement("h3",null,"This idea is empty."),r.a.createElement("strong",null,"Do you want to remove it?")),r.a.createElement("div",{className:"modal__action--container"},r.a.createElement(N,{block:!0,onClick:function(){return I(!1)}},"No. Keep it."),r.a.createElement(N,{type:"danger",block:!0,onClick:function(){return I(!0)}},"Yes. Remove it."))))};P.propType={idea:w.shape({id:w.string.isRequired,created_at:w.string.isRequired,title:w.string,body:w.string}).isRequired,onDelete:w.func.isRequired,onUpdate:w.func.isRequired,enableSort:w.func,disableSort:w.func};n(31);var D=function(e){var t=e.options,n=e.selectedValue,a=e.onChange;return r.a.createElement("select",{"data-testid":"select",className:"select",value:n,onChange:function(e){return a(e.target.value)}},t.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){var e=E(),t=e.Notification,n=function(e){var t=Object(a.useState)(!0),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)([]),u=Object(i.a)(o,2),l=u[0],d=u[1],v=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,fetch("".concat(m,"/ideas"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,d(n),c(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/ideas"),{method:"POST",headers:p});case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent)&&(d((function(e){return[n].concat(Object(s.a)(e))})),window.location.href="".concat(window.location.href.split("#")[0],"#").concat(n.id));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/idea/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent.success&&v();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/idea/").concat(t.id),{method:"PUT",headers:p,body:JSON.stringify({title:t.title,body:t.body})});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,r={},a.success&&(d((function(e){var n=l.findIndex((function(e){return e.id===t.id}));return r=Object.assign(e[n]),e[n]=t,Object(s.a)(e)})),j(r,t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(t,n){return n.title||n.body?t.title!==n.title&&t.body!==n.body?e("Idea ".concat(t.title||"untitled"," has been updated!")):t.title!==n.title?e("The title of ".concat(t.title||"untitled"," has been updated to ").concat(n.title||"untitled","!")):t.body!==n.body?e("The body of ".concat(t.title||"untitled"," has been updated!")):void 0:e("An empty idea has been created!")};return Object(a.useEffect)((function(){r&&v()}),[r]),{ideas:l,addIdea:h,deleteIdea:O,updateIdea:g}}(e.notify),c=n.ideas,o=n.loading,d=n.addIdea,v=n.deleteIdea,h=n.updateIdea,g=y(c),j=g.sortedIdeas,_=g.sortField,w=g.disableSorting,k=g.enableSorting,C=g.updateSortingField,S=Object(a.useState)("100%"),x=Object(i.a)(S,2),I=x[0],F=x[1],T=Object(a.useRef)(null),R=function(){var e=Math.floor(T.current.offsetWidth/170);F("".concat(170*e,"px"))};Object(a.useEffect)((function(){return R(),window.addEventListener("resize",(function(){return R()})),function(){return window.removeEventListener("resize",(function(){return R()}))}}),[]);var B=j.map((function(e){return r.a.createElement(P,{idea:e,key:e.id,disableSort:w,enableSort:k,onDelete:v,onUpdate:h})}));return r.a.createElement("div",{className:"dashboard","data-testid":"dashboard"},r.a.createElement("header",{className:"header_container"},r.a.createElement("h1",null,"Idea Board")),r.a.createElement(t,null),r.a.createElement("div",{className:"cards_action__container"},r.a.createElement(N,{onClick:d},"+ New idea"),r.a.createElement(D,{options:O,onChange:C,selectedValue:_})),r.a.createElement("div",{className:"cards__container",ref:T},r.a.createElement("div",{className:"cards__container--inner",style:{width:"".concat(I)}},j.length>0&&B,o&&0===j.length&&r.a.createElement("div",{className:"cards__container--placeholder"},r.a.createElement(u.a,{icon:l.a,size:"2x"}),r.a.createElement("h3",null,"Loading....")),!o&&0===j.length&&r.a.createElement("div",{className:"cards__container--placeholder"},r.a.createElement(u.a,{icon:l.a,size:"2x"}),r.a.createElement("h3",null,"We're sorry. Your idea board is empty.")))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[13,1,2]]]);
//# sourceMappingURL=main.fa443122.chunk.js.map